<app-main-header></app-main-header>
<div class="content container row justify-content-center align-items-center">
  <div class="col-3"></div>
  <div class="col-9 float-right mt-3">
    <form [formGroup]="formAddNewCustomer" (ngSubmit)="addNewCustomer(formAddNewCustomer.value)">
      <h3 id="title">Thêm mới Khách hàng</h3>
      <hr/>
      <fieldset>
        <legend></legend>

        <div class="item">
          <label class="col-2 float-left">
            Tài khoản <span class="red_asterisk">(*)</span>:
          </label>
          <input id="account" class="col-6 form-control float-left" type="text" formControlName="username">
        </div>
        <div class="item" style="clear: both">
          <label class="col-2 float-left ">
          </label>
          <p
            *ngIf="formAddNewCustomer.get('username').hasError('required') && formAddNewCustomer.get('username').touched"
            class="errMessage">Vui lòng nhập tài khoản !</p>
          <p
            *ngIf="formAddNewCustomer.get('username').hasError('pattern') && formAddNewCustomer.get('username').touched"
            class="errMessage">Tài khoản tối thiểu 6 kí tự gồm cả chữ và số và không nhập kí tự đặc biệt !</p>
        </div>
        <div class="item" style="clear: both">
          <label class="col-2 float-left ">
          </label>
          <p class="text-danger">
            {{listError.existAccount}}
          </p>
        </div>

        <div style="clear: both">
          <div class="item">
            <label class="col-2 float-left" for="password">
              Mật khẩu <span class="red_asterisk">(*)</span>:
            </label>
            <input id="password" type="password" class="col-6 form-control float-left" formControlName="password">
          </div>
          <div class="item" style="clear: both">
            <label class="col-2 float-left">
            </label>
            <p
              *ngIf="formAddNewCustomer.get('password').hasError('required') && formAddNewCustomer.get('password').touched"
              class="errMessage">Vui lòng nhập mật khẩu !</p>
            <p
              *ngIf="formAddNewCustomer.get('password').hasError('pattern') && formAddNewCustomer.get('password').touched"
              class="errMessage">Mật khẩu tối thiểu 6 kí tự gồm cả chữ và số !</p>
          </div>


          <div class="item">
            <label class="col-2 float-left" for="newPassword" style="clear: both">
              Xác nhận <span class="red_asterisk">(*)</span>:
            </label>
            <input class="col-6 form-control float-left" id="newPassword" type="password"
                   formControlName="confirmPassword">
          </div>
          <div class="item" style="clear: both">
            <label class="col-2 float-left">
            </label>
            <p class="errMessage " *ngIf="isMessage">Mật khẩu không trùng khớp !</p>
          </div>

        </div>

      </fieldset>
      <fieldset>
        <legend>Thêm mới thông tin</legend>

        <div class="item" style="clear: both">
          <label class="col-2 float-left" for="name">
            Họ Tên <span class="red_asterisk">(*)</span>:
          </label>
          <input name="name" id="name" class="col-6 form-control float-left" type="text"
                 formControlName="name">
        </div>
        <div class="item" style="clear: both">
          <label class="col-2 float-left">
          </label>
          <p *ngIf="formAddNewCustomer.get('name').hasError('required') && formAddNewCustomer.get('name').touched"
             class="errMessage">Vui lòng nhập tên</p>
          <p *ngIf="formAddNewCustomer.get('name').hasError('pattern') && formAddNewCustomer.get('name').touched"
             class="errMessage">Tài khoản tối thiểu 6 kí tự gồm cả chữ và số và không nhập kí tự đặc biệt !</p>
        </div>

        <div class="item">
          <label class="col-2 float-left" for="phone" style="clear: both">
            Điện thoại <span class="red_asterisk">(*)</span>:
          </label>
          <input id="phone" class="col-6 form-control float-left" type="text" formControlName="phone">
        </div>
        <div class="item" style="clear: both">
          <label class="col-2 float-left">
          </label>
          <p *ngIf="formAddNewCustomer.get('phone').hasError('required') && formAddNewCustomer.get('phone').touched"
             class="errMessage">Vui lòng nhập số điện thoại</p>
          <p *ngIf="formAddNewCustomer.get('phone').hasError('pattern')&& formAddNewCustomer.get('phone').touched"
             class="errMessage">Số điện thoại không đúng định dạng !</p>
        </div>


        <div class="item" style="clear: both">
          <label class="col-2 float-left ">
          </label>
          <p *ngIf="isMessage3" class="text-danger">
            Điện thoại đã được đăng ký
          </p>
        </div>

        <div class="item">
          <label class="col-2 float-left" for="email" style="clear: both">
            Email <span class="red_asterisk">(*)</span>:
          </label>
          <input id="email" class="col-6 form-control float-left" type="text" formControlName="email">
        </div>
        <div class="item" style="clear: both">
          <label class="col-2 float-left">
          </label>
          <p *ngIf="formAddNewCustomer.get('email').hasError('required') && formAddNewCustomer.get('email').touched"
             class="errMessage">Vui lòng nhập email !</p>
          <p *ngIf="formAddNewCustomer.get('email').hasError('pattern')&& formAddNewCustomer.get('email').touched"
             class="errMessage">Email không đúng định dạng !</p>
        </div>

        <div class="item" style="clear: both">
          <label class="col-2 float-left ">
          </label>
          <p class="text-danger">
            {{listError.existEmail}}
          </p>
        </div>
        <div class="item" style="clear: both">
          <label class="col-2 float-left ">
          </label>
          <p *ngIf="isMessage1" class="text-danger">
            Email đã được đăng ký !
          </p>
        </div>
        <div class="item mt-2">
          <label class="col-2 float-left" style="clear: both">
            Province <span class="red_asterisk">(*)</span>:
          </label>
          <select [compareWith]="compareProvince" formControlName="province" class="col-6 form-control float-left"
                  (change)="onchangeProvince($event.target.value)">
            <option value="" disabled selected>Select Province</option>
            <option *ngFor="let province of provinces" [ngValue]="province">{{province.provinceName}}</option>
          </select>
        </div>
        <div class="item mt-2">
          <label class="col-2 float-left" style="clear: both">
            District <span class="red_asterisk">(*)</span>:
          </label>
          <select [compareWith]="compareDistrict" formControlName="district" class="col-6 form-control float-left"
                  (change)="onchangeDistrict($event.target.value)">
            <option value="" selected disabled>Select District</option>
            <option *ngFor="let district of districts" [ngValue]="district">{{district.districtName}}</option>
          </select>
        </div>
        <div class="item ">
          <label class="col-2 float-left" style="clear: both">
            Ward <span class="red_asterisk">(*)</span>:
          </label>
          <select [compareWith]="compareWard" formControlName="ward" class="col-6 form-control float-left">
            <option value="" selected disabled>Select Ward</option>
            <option *ngFor="let ward of wards" [ngValue]="ward">{{ward.wardName}}</option>
          </select>
        </div>
        <div class="item" style="clear: both">
          <label class="col-2 float-left">
          </label>
          <img [src]="imgSrc" width="100px" height="100px" (click)="fileUploader.click()">
        </div>
        <div class="item" style="clear: both">
          <label class="col-2 float-left" for="image">
            Ảnh Cá Nhân :
          </label>
          <input class="col-6 form-control float-left" type="file" accept="image/*" #fileUploader
                 id="image" formControlName="avatarUrl" (change)="showPreview($event)">
        </div>

        <div class="item" style="clear: both">
          <label class="col-2 float-left">
          </label>
          <p
            *ngIf="formAddNewCustomer.get('avatarUrl').hasError('required') && formAddNewCustomer.get('avatarUrl').touched"
            class="errMessage">Vui lòng chọn hình ảnh !</p>
        </div>
      </fieldset>
      <div class="btn-block">
        <button type="submit" class="btn btn-warning" [disabled]="formAddNewCustomer.invalid">Lưu</button>
        <button type="button" [routerLink]="['/']" class="btn btn-danger ml-3">Hủy</button>
      </div>
    </form>
  </div>
</div>
<app-main-footer></app-main-footer>
